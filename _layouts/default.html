<!DOCTYPE html>
<html lang="{{ site.lang | default: "es-ES" }}">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

{% seo %}
    <link rel="stylesheet" href="{{ "/assets/css/style.css?v=" | append: site.github.build_revision | relative_url }}">
    <!--[if lt IE 9]>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js"></script>
    <![endif]-->
    {% include head-custom.html %}
  </head>
  <body>
    <div class="wrapper">
      <header>
        <!-- <h2><a href="{{ "/" | absolute_url }}">{{ site.title | default: site.github.repository_name }}</a></h2> -->

        {% if site.logo %}
          <img src="{{site.logo | relative_url}}" alt="Logo" class="site-logo" />
        {% endif %}

        <p>{{ site.description | default: site.github.project_tagline }}</p>

      <div class="user-index-card">
        <div class="user-index-title">3 Randoms</div>

        <div id="usuarios-todos" style="display:none">
        {% for usuario in site.usuarios %}
        <a href="{{ usuario.url | relative_url }}" class="user-link">{{ usuario.title }}</a>
        {% endfor %}
        </div>
        
        <div class="user-index-list" id="user-index-list"></div>
      <a href="{{ '/sapers/' | relative_url }}" class="see-all">
      Ver todos &rarr;
      </a>

      </div>

        
      </header>
      <section>

      {{ content }}

      </section>

    </div>
    <script src="{{ "/assets/js/scale.fix.js" | relative_url }}"></script>
    <script type="text/javascript">
      document.addEventListener("DOMContentLoaded", function() {
        // Tomar todos los enlaces de usuarios
        var allUsers = Array.from(document.querySelectorAll("#usuarios-todos .user-link"));
        // Mezclar (shuffle)
        for (let i = allUsers.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [allUsers[i], allUsers[j]] = [allUsers[j], allUsers[i]];
        }
        // Tomar los primeros 3
        var selected = allUsers.slice(0, Math.min(3, allUsers.length));
        // Renderizarlos en el bloque visible
        var target = document.getElementById("user-index-list");
        selected.forEach(el => target.appendChild(el.cloneNode(true)));
      });
    </script>
  </body>
</html>
